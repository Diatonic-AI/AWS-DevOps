---
# Build host role - development tools and CI infrastructure

- name: Install build dependencies
  apt:
    name:
      - build-essential
      - pkg-config
      - libssl-dev
      - libffi-dev
      - python3-dev
      - python3-pip
      - python3-venv
    state: present
  when: ansible_os_family == "Debian"

- name: Install Docker
  include_tasks: docker.yml
  tags: [docker]

- name: Install AWS CLI v2
  include_tasks: awscli.yml
  tags: [aws]

- name: Install Terraform
  include_tasks: terraform.yml
  tags: [terraform]

- name: Create tools directory
  file:
    path: /opt/pcw-tools
    state: directory
    mode: '0755'

- name: Display build host info
  debug:
    msg: "Build host setup complete for {{ ansible_hostname }}"
